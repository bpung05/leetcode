class Solution:
    def checkInclusion(self, s1: str, s2: str) -> bool:

        window_valid_counts = {}
        max_window_length = len(s1)

        # initialize count for s1
        for char in s1:
            window_valid_counts[char] = window_valid_counts.get(char, 0) + 1

        r = 0
        l = 0

        while r < len(s2):
            # read right_char BEFORE incrementing r to avoid IndexError
            right_char = s2[r]
            r += 1  # move right pointer

            # if this char is in s1, decrement its count
            if right_char in window_valid_counts:
                window_valid_counts[right_char] -= 1

            # if window size exceeds s1 length, pop left
            if (r - l) > max_window_length:
                left_char = s2[l]
                l += 1
                if left_char in window_valid_counts:
                    window_valid_counts[left_char] += 1

            # check if all counts are zero â†’ permutation found
            if all(value == 0 for value in window_valid_counts.values()):
                return True

        return False
